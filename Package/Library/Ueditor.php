<?phpnamespace Library;/** * 需要对ueditor修改 * 		ueditor.all.js * 			add [8085] * 			if(typeof(config_url) != "undefined" && config_url != ""){ *				configUrl = config_url; *			} * * */class Ueditor {	/**	 * 配置内容	 * @var string	 */	private $configJson=array();	//private $units=1048576;	//1M	private $units=1024;	//1K	public $config_url = '';	public function __construct(){		$this->configJson=$this->getConfigArray();	}	/**	 * 获取编辑器	 */	public function getUeditor($name='content',$content=''){		$html=<<<HTML		<script id="{$name}" name="{$name}" type="text/plain">{$content}</script>		<script type="text/javascript">			var config_url = '{$this->config_url}';        	var ue{$name} = UE.getEditor('{$name}');		</script>HTML;;		return $html;	}	/**	 * 修改配置	 */	public function setConfig($key,$value){		$config =& $this->configJson;		$config[$key]=$value;	}	/**	 * 获取配置	 */	public function getConfig(){		$config = json_encode($this->configJson);		return $config;	}	/**	 *	 */	public function getContent($name){		$content = empty($_POST[$name]) ? '' : $_POST[$name];		return $content;	}	/**	 * 配置	 */	private function getConfigArray(){		//上传图片配置项		$configJson['imageActionName']='uploadimage';	//执行上传图片的action名称		$configJson['imageFieldName']='upfile';		//提交的图片表单名称		$configJson['imageMaxSize']=2048000;	//上传大小限制,单位B		$configJson['imageAllowFiles']=array(".png", ".jpg", ".jpeg", ".gif", ".bmp");	//上传图片格式显示		$configJson['imageCompressEnable']=true;	//是否压缩图片,默认是true		$configJson['imageCompressBorder']=1600;	//图片压缩最长边限制		$configJson['imageInsertAlign']='none';	//插入的图片浮动方式		$configJson['imageUrlPrefix']='';	//图片访问路径前缀		$configJson['imagePathFormat']='/ueditor/php/upload/image/{yyyy}{mm}{dd}/{time}{rand:6}';	//上传保存路径,可以自定义保存路径和文件名格式		//涂鸦图片上传配置项		$configJson['scrawlActionName']='uploadscrawl';	//执行上传涂鸦的action名称		$configJson['scrawlFieldName']='upfile';	//提交的图片表单名称		$configJson['scrawlPathFormat']='/ueditor/php/upload/image/{yyyy}{mm}{dd}/{time}{rand:6}';	//上传保存路径,可以自定义保存路径和文件名格式		$configJson['scrawlMaxSize']='2048000';	//上传大小限制，单位B		$configJson['scrawlUrlPrefix']='';	//图片访问路径前缀		$configJson['scrawlInsertAlign']='none';		//截图工具上传		$configJson['snapscreenActionName']='uploadimage';	//执行上传截图的action名称		$configJson['snapscreenPathFormat']='/ueditor/php/upload/image/{yyyy}{mm}{dd}/{time}{rand:6}';	//上传保存路径,可以自定义保存路径和文件名格式		$configJson['snapscreenUrlPrefix']='';	//图片访问路径前缀 		$configJson['snapscreenInsertAlign']='none';	//插入的图片浮动方		//抓取远程图片配置		$configJson['catcherLocalDomain']=array("127.0.0.1", "localhost", "img.baidu.com");		$configJson['catcherActionName']='catchimage';	//执行抓取远程图片的action名称		$configJson['catcherFieldName']='source';	//提交的图片列表表单名称		$configJson['catcherPathFormat']='/ueditor/php/upload/image/{yyyy}{mm}{dd}/{time}{rand:6}';	//上传保存路径,可以自定义保存路径和文件名格式		$configJson['catcherUrlPrefix']='';	//图片访问路径前缀		$configJson['catcherMaxSize']=2048000;	//上传大小限制		$configJson['catcherAllowFiles']=array(".png", ".jpg", ".jpeg", ".gif", ".bmp");	//抓取图片格式显示		//上传视频配置		$configJson['videoActionName']='uploadvideo';	//执行上传视频的action名称		$configJson['videoFieldName']='upfile';	//提交的视频表单名称		$configJson['videoPathFormat']='/ueditor/php/upload/video/{yyyy}{mm}{dd}/{time}{rand:6}';	//上传保存路径,可以自定义保存路径和文件名格式		$configJson['videoUrlPrefix']='';	//视频访问路径前缀		$configJson['videoMaxSize']=102400000;	//上传大小限制，单位B，默认100MB		$configJson['videoAllowFiles']=array(".flv", ".swf", ".mkv", ".avi", ".rm", ".rmvb", ".mpeg", ".mpg",        ".ogg", ".ogv", ".mov", ".wmv", ".mp4", ".webm", ".mp3", ".wav", ".mid");	//上传视频格式显示		//上传文件配置		$configJson['fileActionName']='uploadfile';	/* controller里,执行上传视频的action名称 */		$configJson['fileFieldName']='upfile';	/* 提交的文件表单名称 */		$configJson['filePathFormat']='/ueditor/php/upload/file/{yyyy}{mm}{dd}/{time}{rand:6}';	/* 上传保存路径,可以自定义保存路径和文件名格式 */		$configJson['fileUrlPrefix']='';	/* 文件访问路径前缀 */		$configJson['fileMaxSize']=51200000;	/* 上传大小限制，单位B，默认50MB */		$configJson['fileAllowFiles']=array(".png", ".jpg", ".jpeg", ".gif", ".bmp",        ".flv", ".swf", ".mkv", ".avi", ".rm", ".rmvb", ".mpeg", ".mpg",        ".ogg", ".ogv", ".mov", ".wmv", ".mp4", ".webm", ".mp3", ".wav", ".mid",        ".rar", ".zip", ".tar", ".gz", ".7z", ".bz2", ".cab", ".iso",        ".doc", ".docx", ".xls", ".xlsx", ".ppt", ".pptx", ".pdf", ".txt", ".md", ".xml");	/* 上传文件格式显示 */		/* 列出指定目录下的图片 */		$configJson['imageManagerActionName']='listimage';	/* 执行图片管理的action名称 */		$configJson['imageManagerListPath']='/ueditor/php/upload/image/';	/* 指定要列出图片的目录 */		$configJson['imageManagerListSize']='20';	/* 每次列出文件数量 */		$configJson['imageManagerUrlPrefix']='';	/* 图片访问路径前缀 */		$configJson['imageManagerInsertAlign']='none';	/* 插入的图片浮动方式 */		$configJson['imageManagerAllowFiles']=array(".png", ".jpg", ".jpeg", ".gif", ".bmp");	/* 列出的文件类型 */		/* 列出指定目录下的文件 */		$configJson['fileManagerActionName']='listfile';	/* 执行文件管理的action名称 */		$configJson['fileManagerListPath']='/ueditor/php/upload/file/20141119/';	/* 指定要列出文件的目录 */		$configJson['fileManagerUrlPrefix']='';	/* 文件访问路径前缀 */		$configJson['fileManagerListSize']=20;	/*  每次列出文件数量 */		$configJson['fileManagerAllowFiles']=array( ".png", ".jpg", ".jpeg", ".gif", ".bmp",        ".flv", ".swf", ".mkv", ".avi", ".rm", ".rmvb", ".mpeg", ".mpg",        ".ogg", ".ogv", ".mov", ".wmv", ".mp4", ".webm", ".mp3", ".wav", ".mid",        ".rar", ".zip", ".tar", ".gz", ".7z", ".bz2", ".cab", ".iso",        ".doc", ".docx", ".xls", ".xlsx", ".ppt", ".pptx", ".pdf", ".txt", ".md", ".xml");	/* 列出的文件类型 */		return $configJson;	}	}